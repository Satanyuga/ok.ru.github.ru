define(function(){function b(c){this.element=c;this.promo=this.element.getAttribute("data-promo");this.useWebP=this.element.getAttribute("data-use-webp")==="true";this.staticPath=this.element.getAttribute("data-static");this.basePath=this.staticPath+"res/i/anonym/"+this.promo+"/image";this.rootHtmlNode=document.documentElement;this.extension=".jpg";}b.prototype={init:function(){if(this.promo!=="default"){if(this.useWebP&&(this.rootHtmlNode.classList.contains("chrome")||this.rootHtmlNode.classList.contains("mac-chrome"))){this.extension=".webp";}}return this;},setImage:function(){this.element.style.backgroundImage="url("+this.getSrc()+")";return this;},getSrc:function(){return this.basePath+this.extension;},loadImage:function(){var c=new Image();c.onload=function(){this.setImage();this.element.classList.add("__show");}.bind(this);c.src=this.getSrc();}};function a(c){return new b(c).init().loadImage();}return{activate:a};});